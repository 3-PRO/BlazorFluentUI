@using Microsoft.AspNetCore.Components
@inherits LayoutComponentBase

   
<Stack Horizontal="true" Style="width:100%;">
    <ResponsiveLayout MinWidth="768">
        <StackItem Grow="0" DisableShrink="true" Style="height:100%;overflow:hidden;">
            <NavMenu />
        </StackItem>
    </ResponsiveLayout>


    <StackItem Grow="1" Style="overflow:hidden">
        <Stack VerticalFill="true" Style="width:100%;">

            <ResponsiveLayout MinWidth="0" MaxWidth="767">
                <StackItem Grow="0" VerticalFill="false">
                    <IconButton IconName="GlobalNavButton" OnClick=@ShowMenu />
                </StackItem>
            </ResponsiveLayout>

            <ResponsiveLayout MinWidth="768">
                <StackItem Grow="0" VerticalFill="false">
                    <div class="top-row">
                        <a href="https://github.com/limefrogyank/BlazorFabric" target="_blank" class="ml-md-auto">View GitHub repo of BlazorFabric...</a>
                    </div>
                </StackItem>
            </ResponsiveLayout>

            <ResponsiveLayout MinWidth="0" MaxWidth="767">
                <StackItem Grow="1" Tokens="new StackItemTokens { Padding = 5 }" Style="overflow:hidden;">
                    <div class="content">
                        @Body
                    </div>
                </StackItem>
            </ResponsiveLayout>

            <ResponsiveLayout MinWidth="768">
                <StackItem Grow="1" Style="overflow:hidden;">
                    <div class="content">
                        @Body
                    </div>
                </StackItem>
            </ResponsiveLayout>

        </Stack>

        <ResponsiveLayout MinWidth="0" MaxWidth="767">
            <Panel Type=@PanelType.SmallFixedNear OnDismiss=@(()=>isPanelOpen = false) IsOpen=@isPanelOpen IsLightDismiss="true">
                <NavigationTemplate>
                    <IconButton IconName="GlobalNavButton" OnClick=@(()=> isPanelOpen = false) />
                    <a href="https://github.com/limefrogyank/BlazorFabric" target="_blank" class="ml-md-auto">View GitHub repo of BlazorFabric...</a>
                </NavigationTemplate>
                <ChildContent>
                    <NavMenu OnLinkClicked=@OnNavLinkClick />
                </ChildContent>
            </Panel>
        </ResponsiveLayout>

    </StackItem>

</Stack>

@code {
    private bool isMenuCollapsed = true;
    private bool isPanelOpen = false;

    void ShowMenu()
    {
        isPanelOpen = true;
    }

    void HideMenu()
    {
        isPanelOpen = false;
    }

    void OnNavLinkClick(NavFabricLink linkBase)
    {
        isPanelOpen = false;
    }


}