@namespace BlazorFabric
@inherits FabricComponentBase
@typeparam TItem

<div class=@($"ms-GroupedList{(string.IsNullOrEmpty(ClassName) ? "" : " " + ClassName)}") 
     data-automationid="GroupedList" 
     data-is-scrollable="false" 
     role="presentation"
     style=@($"{Style}height:100%;overflow-y:hidden;")>
    @if (_isGrouped)
    {
        <List ItemsSource=@_groups
              @ref="_mainList"
              GetItemCountForPage=@((a,b)=> 1)
                   >
            <ItemTemplate>
                <GroupedListSection TItem=@TItem
                                    ClassName=@GetGroupKey(context, context.StartIndex)
                                    @key=@GetGroupKey(context, context.StartIndex)
                                    Compact=@Compact
                                    ItemTemplate=@ItemTemplate
                                    GroupKeySelector=@GroupKeySelector
                                    SubGroupSelector=@SubGroupSelector
                                    Group=@context
                                    GroupIndex=@(context.GroupIndex)
                                    OnShouldVirtualize=@OnShouldVirtualize
                                    SelectionMode=@SelectionMode 
                                    OnHeightChanged=@HandleSectionHeightChanged
                                    />
            </ItemTemplate>
        </List>
        
    }
    else
    {
        <List ItemsSource=@ItemsSource
                   ItemTemplate=@ItemTemplate
                   SelectionMode=@SelectionMode2.None
                   GetItemCountForPage=@((a,b)=> 1)
              />
    }

</div>
