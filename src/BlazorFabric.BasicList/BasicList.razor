@namespace BlazorFabric
@inherits FabricComponentBase
@using Microsoft.AspNetCore.Components.Web

@typeparam TItem

<div @ref="RootElementReference" class=@($"ms-List mediumFont {ClassName}") role="list" style=@Style>
    <div @ref="surfaceDiv" class="ms-List-surface" role="presentation">
        @if (_pages != null)
        {
            @for (var i = 0; i < _pages.Count(); i++)
            {
                var page = _pages.ElementAt(i);
                @if (page.IsSpacer)
                {
                    <div style=@($"height:{page.Height}px;")
                          @ref=@_listItemReferences[page.Key]></div>
                }
                else
                {
                    <div @ref=@_listItemReferences[page.Key]>
                        @for (var j = 0; j < page.ItemCount; j++)
                        {
                            var index = page.StartIndex + j;
                            var item = page.Items.ElementAt(j);
                            <div role="listitem"
                                 class="ms-List-cell"
                                 data-list-index=@index
                                 data-automationid="ListCell">
                                @ItemTemplate(item)
                            </div>
                        }
                    </div>
                }
            }
        }
    </div>
</div>
